services:
  sysvinit:
    varnish:
      enabled: true
      ensureRunning: true
      files: "/etc/varnish/default.vcl"
      packages:
        yum:
          varnish: []
    memcached:
      enabled: true
      ensureRunning: true
      packages:
        yum:
          memcached: []
packages:
  yum:
    libmemcached: []
    ruby-devel: []
    gcc: []
    git: []
    varnish: []
    memcached: []
    wget: []
    imagemagick: []
files:
  "/etc/varnish/default.vcl":
    mode: "000644"
    owner: root
    group: root
    source: https://s3-us-west-2.amazonaws.com/batserver-deploy/varnishConfig.vcl
  "/tmp/config.js":
    mode: "000644"
    owner: nodejs
    group: nodejs
    source: https://s3-us-west-2.amazonaws.com/batserver-deploy/batServerConfig.js
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_copy_config_file.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      cd /var/app/current
      mv /tmp/config.js .
      chown nodejs:nodejs config.js
commands:
  create_post_dir:
    command: "mkdir /opt/elasticbeanstalk/hooks/appdeploy/post"
    ignoreErrors: true
